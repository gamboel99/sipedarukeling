<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Halaman Pemdes | SIPEDARU</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body { font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; background-color: #f2f2f2; }
    header { background-color: #c8102e; color: white; padding: 1rem 2rem; text-align: center; }
    nav { background-color: #002868; display: flex; padding: 0.5rem; flex-wrap: wrap; }
    nav a {
      color: white;
      text-decoration: none;
      margin: 0.5rem;
      padding: 0.5rem 1rem;
      background-color: #003e7e;
      border-radius: 5px;
    }
    main { padding: 2rem; }
    h2 { color: #002868; }
    label { display: block; margin-top: 1rem; }
    input, textarea, select {
      width: 100%; padding: 0.5rem; margin-top: 0.2rem; border: 1px solid #ccc; border-radius: 4px;
    }
    button {
      margin-top: 1rem; padding: 0.6rem 1.5rem; background-color: #c8102e; color: white;
      border: none; border-radius: 4px; cursor: pointer;
    }
    table { width: 100%; margin-top: 1.5rem; border-collapse: collapse; background-color: white; }
    th, td { padding: 0.75rem; border: 1px solid #ccc; text-align: left; }
    th { background-color: #003e7e; color: white; }
    .info-box { background: #fff3cd; border-left: 5px solid #ffc107; padding: 1rem; margin-top: 1rem; }
    .send-wa { background-color: #25D366; margin-left: 1rem; }
    footer { background: #002868; color: white; text-align: center; padding: 1rem; margin-top: 2rem; }
    @media (max-width: 768px) {
      nav a { flex: 1 1 100%; text-align: center; }
    }
  </style>
</head>
<body>

<header>
  <h1>SIPEDARU - Sistem Informasi Pelayanan & Data Terpadu</h1>
</header>

<nav>
  <a href="index.html">Beranda</a>
  <a href="pemdes.html">Pemdes</a>
  <a href="kadus.html">Kadus</a>
  <a href="rw.html">RW</a>
  <a href="rt.html">RT</a>
  <a href="bantuan.html">Bantuan</a>
  <a href="rekap.html">Rekap</a>
</nav>

<main>
  <h2>Informasi & Perintah dari Pemdes</h2>

  <div class="info-box">
    <strong>Catatan:</strong> Gunakan form di bawah ini untuk menyampaikan informasi resmi kepada seluruh Kepala Dusun (Kasun).
  </div>

  <form id="formPemdes">
    <label for="judul">Judul Informasi</label>
    <input type="text" id="judul" required>

    <label for="isi">Isi Informasi / Perintah</label>
    <textarea id="isi" rows="5" required></textarea>

    <button type="submit">Kirim ke Semua Kasun</button>
    <button class="send-wa" onclick="kirimKeWhatsApp()">Kirim ke WhatsApp Kasun</button>
  </form>

  <h2>Daftar Feedback & Laporan dari Kasun</h2>
  <table id="tabelFeedback">
    <thead>
      <tr>
        <th>Nama Kasun</th>
        <th>Isi Balasan</th>
        <th>Status</th>
        <th>Tanggal</th>
      </tr>
    </thead>
    <tbody>
      <!-- Data dummy contoh -->
      <tr>
        <td>Kasun Timur</td>
        <td>Siap dilaksanakan dan sudah disampaikan ke RW.</td>
        <td>Selesai</td>
        <td>24 Juli 2025</td>
      </tr>
      <tr>
        <td>Kasun Barat</td>
        <td>Perlu koordinasi tambahan. Jadwal akan dikonfirmasi.</td>
        <td>Proses</td>
        <td>24 Juli 2025</td>
      </tr>
    </tbody>
  </table>

  <button onclick="exportTableToExcel('tabelFeedback', 'laporan_kasun')">Export Excel</button>
</main>

<footer>
  &copy; 2025 SIPEDARU - Pemerintah Desa Keling. All rights reserved.
</footer>

<script>
  function kirimKeWhatsApp() {
    const judul = document.getElementById("judul").value;
    const isi = document.getElementById("isi").value;
    const link = `https://wa.me/?text=ðŸ›‘ *INFORMASI DARI PEMDES* ðŸ›‘%0A%0A*${encodeURIComponent(judul)}*%0A${encodeURIComponent(isi)}`;
    window.open(link, "_blank");
  }

  document.getElementById("formPemdes").addEventListener("submit", function(e) {
    e.preventDefault();
    alert("Informasi berhasil dikirim ke seluruh Kasun!");
    // Di dunia nyata, ini dikirim ke server / database
    document.getElementById("formPemdes").reset();
  });

  function exportTableToExcel(tableID, filename = ''){
    let dataType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';
    let tableSelect = document.getElementById(tableID);
    let tableHTML = tableSelect.outerHTML.replace(/ /g, '%20');

    let downloadLink = document.createElement("a");
    document.body.appendChild(downloadLink);

    downloadLink.href = 'data:' + dataType + ', ' + tableHTML;
    downloadLink.download = filename ? filename + '.xls' : 'data_excel.xls';
    downloadLink.click();
  }
</script>

</body>
</html>
